{% load staticfiles %}
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}{% endblock %}</title>

    <!-- jQuery -->
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>

    {% block js %}{% endblock %}
    {% block css %}{% endblock %}
</head>
<body>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : '172511599870594',
      xfbml      : true,
      version    : 'v2.6'
    });
  };

  (function(d, s, id){
     var js, fjs = d.getElementsByTagName(s)[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement(s); js.id = id;
     js.src = "//connect.facebook.net/en_US/sdk.js";
     fjs.parentNode.insertBefore(js, fjs);
   }(document, 'script', 'facebook-jssdk'));
</script>
{% block body %}
{% endblock %}
<script>
//For doing AJAX post
$("form.addCart").submit(function(e) {
    e.preventDefault();
    $.ajax({
        url : "{% url 'shopping-cart-add' %}",
        type : "POST", // http method
        data : $(this).serialize(), // data sent with the post request
        // handle a successful response
        success : function(json) {
            console.log(json); // another sanity check
            alert(json['message']);
            if (json['redirect']){
                window.location.href = json['redirect'];
            }
        },
        // handle a non-successful response
        error : function(xhr,errmsg,err) {
            console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
        }
    });
});
</script>
</body>
</html>